[
  {
    "category": "refactor",
    "description": "Rename api.repos.publish.ts to api.repos.publishToDropbox.ts",
    "steps": [
      "Rename app/routes/api.repos.publish.ts to app/routes/api.repos.publishToDropbox.ts",
      "Update action reference in _index.tsx from /api/repos/publish to /api/repos/publishToDropbox",
      "Run pnpm typecheck to verify no errors",
      "Verify Dropbox publishing still works by triggering publish action"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Extract db-service errors to separate file",
    "steps": [
      "Create app/services/db-service-errors.ts",
      "Move NotFoundError, UnknownDBServiceError, NotLatestVersionError, CannotDeleteOnlyVersionError, CannotDeleteNonLatestVersionError to new file",
      "Export all errors from new file",
      "Update imports in db-service.ts",
      "Update any other files importing these errors from db-service.ts",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Convert appendClips to object-based arguments",
    "steps": [
      "Change appendClips(videoId, insertionPoint, inputClips) to appendClips({videoId, insertionPoint, clips})",
      "Update all callers of appendClips",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Convert createSections to object-based arguments",
    "steps": [
      "Change createSections(repoId, newSections, repoVersionId?) to createSections({repoId, sections, repoVersionId?})",
      "Update all callers of createSections",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Convert updateRepoVersionName to object-based arguments",
    "steps": [
      "Change updateRepoVersionName(versionId, name) to updateRepoVersionName({versionId, name})",
      "Update all callers",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Convert updateRepoName to object-based arguments",
    "steps": [
      "Change updateRepoName(repoId, name) to updateRepoName({repoId, name})",
      "Update all callers",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Convert getRepoWithSectionsByVersion to object-based arguments",
    "steps": [
      "Change getRepoWithSectionsByVersion(repoId, versionId) to getRepoWithSectionsByVersion({repoId, versionId})",
      "Update all callers",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "cleanup",
    "description": "Remove unused next-themes dependency",
    "steps": [
      "Run pnpm remove next-themes",
      "Verify no imports of next-themes exist in codebase",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": false
  },
  {
    "category": "refactor",
    "description": "Add/standardize error handling in all Effect-based routes",
    "steps": [
      "Pattern: use Effect.catchTags for known errors, Effect.catchAll as fallback",
      "Pattern: use Effect.die(data(..., { status: xxx })) instead of Effect.succeed(new Response(...))",
      "Import { data } from 'react-router' in each route",
      "Routes WITH error handling (update to new pattern): api.repos.add, api.repos.update, api.repos.publish, api.repos.$repoId.create-version, api.repos.$repoId.clear-video-files, api.repos.migrate-to-versions",
      "Routes MISSING error handling (add it): api.repos.$repoId.delete-version, api.repos.$repoId.rename-version, api.repos.$repoId.rename-repo, api.repos.$repoId.export-all, api.repos.$repoId.export-unexported, api.videos.delete, api.videos.$videoId.export, api.videos.edit-latest-obs-video, api.lessons.delete, api.lessons.$lessonId.add-video, api.lessons.$lessonId.update-name, api.write-readme, _index.tsx, videos.$videoId.edit.tsx, videos.$videoId.ts, videos.$videoId.write.tsx, videos.$videoId.append-from-obs, videos.$videoId.completions, videos.$videoId.export-to-davinci-resolve, clips.$clipId.first-frame.ts, clips.$clipId.last-frame.ts, clips.update.ts, clips.update-beat.ts, clips.transcribe.ts, clips.archive.ts",
      "Run pnpm typecheck to verify no errors"
    ],
    "passes": true
  }
]
